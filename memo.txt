= 2009-02-11
* CT-DSP
  * stored data を clear できない不具合を修正
  * sotred data の値がおかしい（一周期たりない）不具合を修正
　* 矩形の信号を記録すると、キャンセル後の信号に矩形波の前後のタイミングでスパイクが発生する。AD-DA の1チャンネル分のタイミングが微妙にずれるのが問題。
    * 記録する信号が急峻でなければよいだろう。
    * もしくは、記録する信号に対して十分にsampling 周波数を上げるか。


= 2009-02-05
* 設定ウインドウで入力を数値だけに制限する。 -- 済み。
* あとは校正のみ

= 20009-02-02
* CT-DSP の方はだいたいできた。
* ハードも改造終了
* 平均値表示機能を改修する。 -- 済み
* 自前での計算は効率だけにする。 -- 済み
  * 更新時間を表示するようにする。 -- 済み
* 設定ファイルの管理機能 -- 済み
  * よそから読み込んで、setting.txt に書き込む
  * setting.txt の一番最後にファイルパスを書き込む-- 済み。
  * ファイルパスを設定ウインドウに表示する。-- 済み。
* 出射平均モードと漏れ平均モードを用意する。-- 済み
  * それぞれ、値を入れ替えられるようにする。-- 済み

= 2009-01-15
ファイルIO を毎周期することはあきらめる。
DSP側に平均操作スタータボタン、設定ファイル読み込みボタンを設ける
  * 平均スタートボタン LED付き
  * 設定読み込みボタン LED付き
  * BS カウント入力
  * 電源スイッチ
GELファイルでs-BOX へプログラムのロードができるようにならないか。-- できた

= 2009/01/14
ファイルの読み書きにかかる時間
main の中で、int_vect_diable/enable して 680msec
int_vect_diable/enable をやめると 110msec
worktime を少し短くすればいけそうだ。

WORKTIME 1.85, MAX_N_AD 9250 に変更
しかし、2秒周期でファイル出力しない。
ファイル出力は trigger 前に終わっている。

ファイル出力が終わったあと、580msec ほど、EINT5(AD_DONE)が正常に動作していない。
timer がおかしくなるのか？

clock_stop/stat してみても変化なし。

load_settings()をコメントアウトするとファイル出力後のデッドタイムが200msecになった。

load_settings()を復活させ、output_data()をコメントアウト
デッドタイムは、200msec と変わらず。

毎周期のファイルIOはあきらめるしかない。


= 2009/01/13
* とりあえず、実装した。
　* work time が終わったら、設定の読み込みと値の出力を行う。
　* 毎週期、読み込みと書き込みを行う実装。
　* DA を使って、ファイル処理の時間を測定する。
　* うまくいけば、平均処理は SlowCTController の方で行う。
* サンプリング周波数を設定ファイルから読み込むのはあきらめる。
  * 配列を取り直すのが面倒。
  * また、誤差磁場を再読み込みしなければならなくなるので、運用の面でも面倒。

= 2009/01/08 21:26:31
* NetBeans へ移行完成
* CT-DSP とすり合わせをする。
* 設定のデフォルト値
	入力の校正値は....
	テストパルス 54.4mA
	Control Module 出力 1.5Vpp
	AD ±10V 16bit -32767～32767
	DA ±10V 14bit -32767～32767　ただし下位2bitは無視される。
	
	
* CT-DSP で周期的に設定を読み込むようにする。
* ファイルの読み込みとパースにかかる時間を計測する。
* 書き出しにかかる時間も計測する
	
* CT-DSP では10周期の平均値をかき出すタイミングは....
	* 常に10周期ごとにデータをかき出す。
	* 設定ファイルにフラグをもうけてスタートのタイミングを設定する。 

= 2008-12-17
(0) setConstraints をできるだけ排除。add の引数で与える。-- 済み 2008-12-17
(1) MonitorWindow の window listener を inline class にする。 -- 済み 2008-12-17
(2) 設定ウィンドウの読み込み書き込み 
  * 設定ウィンドウのフォーマットはどうしよう。-- 済み　2008-12-17
	* とりあえずは、テキストで。# 以前を数値と解釈する。
  * C で簡単に読み込めるように配慮する。
  * dummy ファイルの作成 -- 済み。でも値は適当すぎる。
  * settings ファイルの初回書き出し機能 -- 済み 2008-12-24
  * 設定値を数字以外入力できないようにする。 -- 済み 2008-12-24
  * settings ファイルの書き出し機能
    * ボタンは、「保存」「別名で保存」「読み込み」-- 済み 2008-12-25
	* 最初 保存ボタンは disable -- 済み 2008-12-25
    * 値を設定したら、「保存」ボダンを enable -- 済み 2008-12-25
	* 「保存」 or 「別名で保存」で settings.txt に書き込み -- 済み 2008-12-25
	* 「読み込み」でもsettings.txt に書き込み。-- 済み 2008-12-25
	
(3) DSP 出力ファイルの定期的な読み込み
  * C で書き出せる簡素なフォーマットにする。
